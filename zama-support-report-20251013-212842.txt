============================================================
ZAMA FHE DESTEK RAPORU
============================================================

Tarih: luni 13 octombrie 2025, 21:28:42 +0300
Proje: ChronoMessage / SealedMessage

============================================================
1. SÖZLEŞME BİLGİLERİ
============================================================

Network: Sepolia Testnet (Chain ID: 11155111)

Deploy Edilen Sözleşmeler:
  - ConfidentialMessage: 0x38756CCb09EE1719089F370a8386a772a8F7B5cf
  - ChronoMessageZama:   0x65016d7E35EC1830d599991d82381bf03eEC2987

Deployer Address: 0xF6D39Dda8997407110264acEc6a24345834cB639

Etherscan Links:
  https://sepolia.etherscan.io/address/0x38756CCb09EE1719089F370a8386a772a8F7B5cf
  https://sepolia.etherscan.io/address/0x65016d7E35EC1830d599991d82381bf03eEC2987

============================================================
2. SORUN TANIMI
============================================================

❌ SORUN: FHE.fromExternal() çağrıları revert ediyor

Detaylar:
  - SDK ile şifreleme başarılı
  - Handle ve inputProof formatları doğru
  - Gas estimation sırasında revert oluşuyor
  - Error: execution reverted (sebep belirtilmiyor)

Test Edilen Senaryolar:
  1. ✅ SDK başlatma - Başarılı
  2. ✅ FHE instance oluşturma - Başarılı
  3. ✅ createEncryptedInput().encrypt() - Başarılı
  4. ❌ sendMessage gas estimation - REVERT
  5. ❌ EmelMarket cWETH wrap() - REVERT (karşılaştırma için)

============================================================
3. SDK KONFİGÜRASYONU
============================================================

Package: @zama-fhe/relayer-sdk v0.2.0

SepoliaConfig:
  aclContractAddress:            0x687820221192C5B662b25367F70076A37bc79b6c
  kmsContractAddress:            0x1364cBBf2cDF5032C47d8226a6f6FBD2AFCDacAC
  inputVerifierContractAddress:  0xbc91f3daD1A5F19F8390c400196e58073B6a0BC4
  gatewayChainId:                55815
  relayerUrl:                    https://relayer.testnet.zama.cloud
  network:                       https://eth-sepolia.public.blastapi.io

============================================================
4. SÖZLEŞME KONFİGÜRASYONU
============================================================

Solidity Version: 0.8.24
FHEVM Library: @fhevm/solidity v0.9.0-1

ZamaConfig (contracts kullanıyor):
  ACLAddress:            0x687820221192C5B662b25367F70076A37bc79b6c ✅
  CoprocessorAddress:    0x848B0066793BcC60346Da1F49049357399B8D595
  KMSVerifierAddress:    0x1364cBBf2cDF5032C47d8226a6f6FBD2AFCDacAC ✅
  Protocol ID:           10001 ✅

Constructor: extends SepoliaConfig

============================================================
5. TEST SONUÇLARI
============================================================

Çalıştırılan Script: scripts/verify-zama-config.ts

Sonuçlar:
  ✅ FHE Instance oluşturuldu
  ✅ Public Key alındı (33018 bytes)
  ✅ Sözleşme erişilebilir
  ✅ Protocol ID doğru (10001)
  ✅ Şifreleme başarılı
  ✅ ACL sözleşmesi deploy edilmiş
  ✅ Relayer erişilebilir
  ❌ sendMessage gas estimation revert

Örnek Handle: 0x1e3c63efa44a862ae503c460fc1e2982d2195493d2000000000000aa36a70500
Handle Size: 32 bytes ✅
Proof Size: 100 bytes ✅

============================================================
6. GEÇERLİLİK KONTROLÜ
============================================================

ACL/KMS Adres Karşılaştırması:
  SDK ACL:       0x687820221192C5B662b25367F70076A37bc79b6c
  Contract ACL:  0x687820221192C5B662b25367F70076A37bc79b6c
  Durum:         ✅ EŞLEŞIYOR

  SDK KMS:       0x1364cBBf2cDF5032C47d8226a6f6FBD2AFCDacAC
  Contract KMS:  0x1364cBBf2cDF5032C47d8226a6f6FBD2AFCDacAC
  Durum:         ✅ EŞLEŞIYOR

============================================================
7. TAHMİNİ SORUN NEDENİ
============================================================

Olası Nedenler:

1. ⚠️  SÖZLEŞME KAYIT EKSİKLİĞİ
   Sözleşmemiz Zama relayer tarafından tanınmıyor olabilir.
   Relayer'ın ACL/InputVerifier listesine eklenmemiş olabilir.

2. ⚠️  INPUT PROOF DOĞRULAMA SORUNU
   createEncryptedInput(contractAddress, userAddress) çağrısı
   doğru parametrelerle yapılıyor ancak proof doğrulanamıyor.

3. ⚠️  GATEWAY BAĞLANTI SORUNU
   Gateway Chain ID: 55815
   Sözleşme bu gateway ile iletişim kuramıyor olabilir.

============================================================
8. TALEP EDİLEN DESTEK
============================================================

❓ Sorular:

1. Sözleşmemiz relayer'a kayıtlı mı?
   - Contract: 0x38756CCb09EE1719089F370a8386a772a8F7B5cf

2. ACL izinleri verilmiş mi?
   - Deployer: 0xF6D39Dda8997407110264acEc6a24345834cB639

3. Input verifier sözleşmeyi biliyor mu?
   - InputVerifier: 0xbc91f3daD1A5F19F8390c400196e58073B6a0BC4

4. Sözleşmeyi manuel olarak kaydetmemiz gerekiyor mu?

5. Ek bir kurulum/konfigürasyon adımı var mı?

============================================================
9. İLETİŞİM BİLGİLERİ
============================================================

Proje: ChronoMessage (Zaman Kilitli FHE Mesajlaşma)
GitHub: (varsa eklenebilir)

Deployer Email: (isteğe bağlı)
Discord Username: (isteğe bağlı)

============================================================
10. EK DÖKÜMANLAR
============================================================

Proje içinde mevcut dökümanlar:
  - ZAMA_TROUBLESHOOTING.md
  - ZAMA_INTEGRATION.md
  - scripts/verify-zama-config.ts
  - scripts/test-emelmarket-encryption.ts

Bu dosyaları da inceleyebilirsiniz.

============================================================
RAPOR SONU
============================================================

Bu rapor otomatik olarak oluşturulmuştur.
Script: generate-support-report.sh
Tarih: luni 13 octombrie 2025, 21:28:42 +0300

